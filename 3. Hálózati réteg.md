## Forgalomirányító Algoritmusok
a hálózati réteg azon része amely eldönti hogy az adott csomag melyik kimeneti vonalon kerüljön továbbításra
2 lépés:
- forgalomirányító táblázatok feltöltése, karbantartása
- továbbítás
Algoritmusosztályok:
- Adaptív: a topológia és rendszerint a forgalom is befolyásolhatja a döntést
	- különbségek közöttük lehet:
		- honnan kapják az infortmációt: szomszédok, helyileg, minden routerből
		- mikor változtathatnak az útvonalakon: meghatározott másodpercenként, terhelés/topológia változására
		- milyen mértékeket használnak az optimalizáláshoz: távolság, ugrások(hops) száma, becsült késleltetés
- Nem adaptív: offline meghatározás, betöltés a router-be induláskor

Optimalitási elv:
- Ha j router I routertől K router felé vezető optimális útvonalon helyezkedik el akkor J-től K-ig vezető útvonal is ugyanerre esik
	- következmény: az összes forrásból egy célba tartó  optimális utak egy olyan fát alkotnak, melynek gyökere a cél. Ezt nevezzük nyelőfának.

Alhálózat reprezentációja:
Az alhálózat tekinthető egy gráfnak, melyben minden router egy node, és minden él egy link(kommunikációs vonal)
	- ![[Pasted image 20250526165357.png]]

### Távolságvektor alapú forgalomirányítás: 
A Dinamikus algoritmusoknak két csoportja van:
1. távolságvektor alapú (distance vector routing)
	- Minden router-nek egy táblázatot kell karbantartania mely minden célhoz szerepel a legrövidebb ismert távolság és annak a vonalnak az azonosítója
	- A táblázatokat a szomszédoktól származó információ alapján frissítik
	- Elosztott Bellman-Ford algoritmusként is ismerik
	- https://youtu.be/oyKdUeHgPUo?list=PL3GWppGvUS1q8JXHWmdN8SGVFpO4KtyS2&t=3450
	- végtelenségig számolásra megoldás: 
		- **split horizons with poisoned reverse:** Negatív információt küld vissza a szomszédjának amit tőle tanult
		- https://youtu.be/oyKdUeHgPUo?list=PL3GWppGvUS1q8JXHWmdN8SGVFpO4KtyS2&t=4782
2. kapcsolatállapot alapú (link-state routing)
	- eltérő sávszélességek figyelembe vétele
	- Öt lépésből áll össze az alapötlet:
		1. szomszédok felkutatása, hálózati címeik meghatározása
		2. megmérni a késleltetést vagy költséget minden szomszédra
		3. egy csomag összeállítása az összeszedett infókból
		4. csomag elküldése az összes többi routernek
		5. kiszámítani a legrövidebb utat az összes többi routernek
			- Dijkstra
OSPF és ISIS
	![[Pasted image 20250526172804.png]]
### Szállítási réteg felé nyújtott szolgáltatások
Vezérelve:
- a szolgálat legyen független az alhálózat kialakításától
- a szállítási réteg számára rendelkezésre bocsátott címeknek legyen egy egységes számozási rendszerük
Szolgálatok két fajtája:
- összeköttetés nélküli szolgálat (Internet): datagram alhálózat
- Összeköttetés alapú szolgálat (ATM): virtuális áramköralhálózat
### Unicast forgalomirányítás:
- forrás és cél egyedi azonosítóval rendelkezik
- csomag küldése két végpont között
### Adatszóró forgalomirányítás:
- Adatszórás(Broadcasting): egy csomag mindehová való kiküldése
- többféle megvalósítás:
	- külön csomag küldése minden egyes helyre, sávszélesség pazarló, lista kell hozzá
	- elárasztás
	- broadcast cím használata (töbcélú, multidestination casting)
	- a forrásrouterhez tartozó nyelőfa használata
	- visszairáníú továbbítás(reverse path forwarding)
### Többes küldéses(mutlicasting) forgalomirányítás
- egy meghatározott csoporthoz küldés
- multicast routing
	- csoportkezelés
	- minden alhálózatban az összes többi routert lefedő feszítőfát építünk
	- médialapú pl.: tv szórás
### Hierarchikus forgalomirányítás
- zónákra bontjuk a hálózatot
- a routing táblák minden eszközt tartalmaznak, de csak azt hogy melyik hálózatban vannak(kivéve ha saját hálózaton belül vagyunk)

B(order-)G(ateway) P(rotocol): 
- AS-ek közötti (exterior gateway protocol)
- eltérő célok vannak forgalomirányítási szempontból mint az AS-eken belüli  protokollnál
- Két AS összekötött ha van a BGP routereik között él

### Hálózatok csoportosítása az átmenő forgalom szempontjából:
1. Csonka hálózat: csak egyetlen összeköttetésük van a BGP gráffal
2. Többszörösen bekötött hálózatok: amelyeket használhatna az átmenő forgalom, de ezek ezt megtagadják
3. Tranzit hálózatok: amelyek némi megkötéssel, és általában fizetség ellenében, de készek kezelni harmadik fél csomagjait
[működése](https://youtu.be/A6RuoyILTzI?list=PL3GWppGvUS1q8JXHWmdN8SGVFpO4KtyS2&t=4722)

### Útvonalvektor Protokoll (Path Vector protokoll):
- AS-útvonal: AS-ek melyeken áthalad az útvonal
- Egy AS-en belül bármilyen routing algoritmust használhatjuk
- routing a leghosszabb prefixegyezés alapján
- a távolságvektor protokoll kiterjesztése
- a teljes útvonalat meghirdeti
	- Távolságvektor: távolságmetrika kiküldése célállomásonként
	- útvonalvektor: a teljes útvonal kiküldése állomásonként

### Rugalmas forgalomirányítás
- minden állomás hely/saját útvonalválasztás politikát alkalmaz
- útvonalválasztás: melyik útvonalat használjuk?
- útvonal export: melyik útvonalat hirdessük meg?

![[Pasted image 20250526175642.png]]

Hot Potato routing: egy autonom rendszer, ha tudja hogy a dest nem az ő hálózatában van akkor megpróbál minél hamarabb megszabadulni a csomagtól 
Cold Potato routing: minél közelebb próbáljuk meg vinni a csomagot a dest-hez a saját hálózatunkon belül, majd csak aztán dobjuk tovább

Route import: a szomszédoktól tanuljuk az útvonalakat pl.: isp az customerektől és peerektől, providertől
route export: ugyanez csak a másik írányba

BGP: Border Gateway protocol
eBGP: exterior Border Gateway Protocol
iBGP: interior Border Gateway Protocol
IGP: interior gateway protocol
	![[Pasted image 20250527180354.png]]

További protokollok:
- ICMP
- ARP
- DHCP
- VPN
	- logikailag elkülöníthető hálózatot kapunk
	- IPSEC authentikáció
		- kulcsok a hosztpárok kommunikációjához
		- fej- és láblécek hozzáadása az ip csomaghoz
		- több módot is támogat melyek közül az egyik az alagút mód
		- ![[Pasted image 20250527181430.png]]
	- tunnelek segítségével-> ip csomagot ip csomagba enkapszulálunk
	- ![[Pasted image 20250527180924.png]]
	- ![[Pasted image 20250527180943.png]]



